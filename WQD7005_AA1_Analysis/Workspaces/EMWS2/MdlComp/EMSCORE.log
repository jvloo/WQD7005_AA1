*------------------------------------------------------------*
* Score Log
Date:                January 07, 2024
Time:                02:05:05
*------------------------------------------------------------*
NOTE: View EMWS2.TREE_TRAIN.VIEW used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      
NOTE: View EMWS2.TREE_TRAIN.VIEW used (Total process time):
      real time           0.03 seconds
      cpu time            0.00 seconds
      
11874  /* Generate assessment metadata, which will be used to generate assessment data step */
11875  /* code, such as retrieving names of temporary variables and summary variables,      */
11876  /* labels, etc.  It is used in almost all the assessment computations such as lift,  */
11877  /* roc, index, scoreDist and could be thought as a global variable in assessment     */
11878  /* computation.                                                                      */
11879  data work.ASSESS_1B2KPR9_assessMeta_BwAhnf;
11880  length VARIABLE $32 FORMAT $44 TYPE $32 PARENT $32 LEVEL $32 PROPERTY $32 MEASUREMENT
11880! $10 LAST_LEVEL $32 GEN_VAR_IN_TEMP_DATA $32 RESULT_MEAN $32 RESULT_MEAN_LABEL $100
11880! RESULT_MIN $32 RESULT_MIN_LABEL $100 MIN_ADJUSTED $32 RESULT_MAX $32 RESULT_MAX_LABEL
11881     $100 MAX_ADJUSTED $32 RESULT_COUNT $32 RESULT_COUNT_LABEL $100 TEMPORARY_VARIABLE $32
11881! ;
11882  VARIABLE = "Churn";
11883  PARENT = "";
11884  FORMAT = "";
11885  TYPE = "";
11886  LEVEL = '';
11887  PROPERTY = "TARGET";
11888  MEASUREMENT = "NOMINAL";
11889  LAST_LEVEL = '';
11890  GEN_VAR_IN_TEMP_DATA = "Churn";
11891  RESULT_MEAN = "";
11892  RESULT_MEAN_LABEL = "";
11893  RESULT_MIN = "";
11894  RESULT_MIN_LABEL = "";
11895  MIN_ADJUSTED = "";
11896  RESULT_MAX = "";
11897  RESULT_MAX_LABEL = "";
11898  MAX_ADJUSTED = "";
11899  RESULT_COUNT = "";
11900  RESULT_COUNT_LABEL = "";
11901  TEMPORARY_VARIABLE = "Churn__gF_E9bvKZu54NB";
11902  output;
11903  VARIABLE = "F_Churn_TRUE";
11904  FORMAT = "";
11905  TYPE = "";
11906  PARENT = "F_Churn";
11907  LEVEL = "TRUE";
11908  PROPERTY = "TARGET_LEVEL";
11909  MEASUREMENT = "INTERVAL";
11910  LAST_LEVEL = "FALSE";
11911  GEN_VAR_IN_TEMP_DATA = "F_Churn_TRUE_aqUUlLWea7APxCi";
11912  RESULT_MEAN = "F_Churn_TR_mean_1B0ohIs2llYhRDr";
11913  /* adjust for tied cases */
11914  RESULT_MEAN_LABEL = "";
11915  RESULT_MIN = "";
11916  RESULT_MIN_LABEL = "";
11917  RESULT_MAX = "";
11918  RESULT_MAX_LABEL = "";
11919  RESULT_COUNT = "NumberOfEvents";
11920  RESULT_COUNT_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_NumEvent_vlabel, NOQUOTE))";
11921  TEMPORARY_VARIABLE = "F_Churn_TRUE_cdxrYismQiQWI6_";
11922  output;
11923  VARIABLE = "F_Churn_FALSE";
11924  FORMAT = "";
11925  TYPE = "";
11926  PARENT = "F_Churn";
11927  LEVEL = "FALSE";
11928  PROPERTY = "TARGET_LEVEL";
11929  MEASUREMENT = "INTERVAL";
11930  LAST_LEVEL = "FALSE";
11931  GEN_VAR_IN_TEMP_DATA = "F_Churn_FALSE_w8ADaqIJhwoHm9B";
11932  RESULT_MEAN = "F_Churn_FA_mean_WRwN31BMnRnDdUV";
11933  /* adjust for tied cases */
11934  RESULT_MEAN_LABEL = "";
11935  RESULT_MIN = "";
11936  RESULT_MIN_LABEL = "";
11937  RESULT_MAX = "";
11938  RESULT_MAX_LABEL = "";
11939  RESULT_COUNT = "NumberOfEvents";
11940  RESULT_COUNT_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_NumEvent_vlabel, NOQUOTE))";
11941  TEMPORARY_VARIABLE = "F_Churn_FALSE_jY0YKg9LcuL2v1q";
11942  output;
11943  VARIABLE = "P_Churntrue";
11944  FORMAT = "";
11945  TYPE = "";
11946  PARENT = "";
11947  LEVEL = "TRUE";
11948  PROPERTY = "POSTERIOR_LEVEL";
11949  MEASUREMENT = "INTERVAL";
11950  LAST_LEVEL = "";
11951  GEN_VAR_IN_TEMP_DATA = "P_Churntrue";
11952  RESULT_MEAN = "_meanP_";
11953  RESULT_MEAN_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMean_vlabel, NOQUOTE))";
11954  RESULT_MIN = "_minP_";
11955  RESULT_MIN_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMin_vlabel, NOQUOTE))";
11956  MIN_ADJUSTED = "P_Churnt_minAdjusted_dhh7Ez_CT";
11957  RESULT_MAX = "_maxP_";
11958  RESULT_MAX_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMax_vlabel, NOQUOTE))";
11959  MAX_ADJUSTED = "P_Churnt_maxAdjusted_o1_Vtbv6U";
11960  RESULT_COUNT = "";
11961  RESULT_COUNT_LABEL = "";
11962  TEMPORARY_VARIABLE = "P_Churntrue_is7qqEDXm0zEjP9";
11963  output;
11964  VARIABLE = "P_Churnfalse";
11965  FORMAT = "";
11966  TYPE = "";
11967  PARENT = "";
11968  LEVEL = "FALSE";
11969  PROPERTY = "POSTERIOR_LEVEL";
11970  MEASUREMENT = "INTERVAL";
11971  LAST_LEVEL = "";
11972  GEN_VAR_IN_TEMP_DATA = "P_Churnfalse";
11973  RESULT_MEAN = "_meanP_";
11974  RESULT_MEAN_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMean_vlabel, NOQUOTE))";
11975  RESULT_MIN = "_minP_";
11976  RESULT_MIN_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMin_vlabel, NOQUOTE))";
11977  MIN_ADJUSTED = "P_Churnf_minAdjusted_qJMVljdZN";
11978  RESULT_MAX = "_maxP_";
11979  RESULT_MAX_LABEL = "%sysfunc(sasmsg(sashelp.dmine, assmt_probMax_vlabel, NOQUOTE))";
11980  MAX_ADJUSTED = "P_Churnf_maxAdjusted_BwthFA9qB";
11981  RESULT_COUNT = "";
11982  RESULT_COUNT_LABEL = "";
11983  TEMPORARY_VARIABLE = "P_Churnfalse_hdB4NywBfsgUPte";
11984  output;
11985  run;

NOTE: The data set WORK.ASSESS_1B2KPR9_ASSESSMETA_BWAHNF has 5 observations and 20 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

11986  /* Generate temporary dataset and obtain summary statistics such as total number of   */
11987  /* obserations, frequency of target.  However, summary statistics for class reporting */
11988  /* variabels are not computed here since if there exist class reporting variables,    */
11989  /* then PROC DMDB will be called. And there is no need to compute interval reporting  */
11990  /* summary statisitcs, if any.                                                        */
11991  data work.ASSESS_1B2KPR9_normSD_VW7MHm(drop=
11992  _numberOfObservation_
11993  _levelFrequency_1
11994  _levelFrequency_2
11995  )
11996  work.ASSESS_1B2KPR9_meansAndTi_UawCOg (keep=
11997  _numberOfObservation_
11998  _levelFrequency_1
11999  _levelFrequency_2
12000  );
12001  set EMWS2.Tree_TRAIN(
12002  where=(
12003  (Churn ^= ' ')
12004  )
12005  ) end=_lastObservation_;
12006  keep frequency_u7Mv8H;
12007  frequency_u7Mv8H = 1;
12008  keep I_Churn F_Churn;
12009  keep F_Churn_TRUE_aqUUlLWea7APxCi;
12010  if (F_Churn = 'TRUE') then do;
12011  F_Churn_TRUE_aqUUlLWea7APxCi = 1;
12012  end;
12013  else do;
12014  F_Churn_TRUE_aqUUlLWea7APxCi = 0;
12015  end;
12016  keep F_Churn_FALSE_w8ADaqIJhwoHm9B;
12017  if (F_Churn = 'FALSE') then do;
12018  F_Churn_FALSE_w8ADaqIJhwoHm9B = 1;
12019  end;
12020  else do;
12021  F_Churn_FALSE_w8ADaqIJhwoHm9B = 0;
12022  end;
12023  keep P_Churntrue;
12024  keep P_Churnfalse;
12025  output work.ASSESS_1B2KPR9_normSD_VW7MHm;
12026  keep _numberOfObservation_;
12027  retain _numberOfObservation_ 0;
12028  _numberOfObservation_ + frequency_u7Mv8H;
12029  keep _levelFrequency_1;
12030  retain _levelFrequency_1 0;
12031  if (F_Churn = 'TRUE') then do;
12032  _levelFrequency_1 + frequency_u7Mv8H;
12033  end;
12034  keep _levelFrequency_2;
12035  retain _levelFrequency_2 0;
12036  if (F_Churn = 'FALSE') then do;
12037  _levelFrequency_2 + frequency_u7Mv8H;
12038  end;
12039  if _lastObservation_ then do;
12040  output work.ASSESS_1B2KPR9_meansAndTi_UawCOg;
12041  end;
12042  run;

NOTE: Variable _WARN_ is uninitialized.
NOTE: View EMWS2.TREE_TRAIN.VIEW used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      
NOTE: There were 3939 observations read from the data set EMWS2.PART_TRAIN.
NOTE: There were 3939 observations read from the data set EMWS2.TREE_TRAIN.
      WHERE Churn not = ' ';
NOTE: The data set WORK.ASSESS_1B2KPR9_NORMSD_VW7MHM has 3939 observations and 7 variables.
NOTE: The data set WORK.ASSESS_1B2KPR9_MEANSANDTI_UAWCOG has 1 observations and 3 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

12043  data WORK._EMRANK;
12044  set EMWS2.MdlComp_EMRANK;
12045  where MODEL = "Tree" and TARGET = "Churn" and dataRole="TRAIN";
12046  run;

NOTE: There were 20 observations read from the data set EMWS2.MDLCOMP_EMRANK.
      WHERE (MODEL='Tree') and (TARGET='Churn') and (dataRole='TRAIN');
NOTE: The data set WORK._EMRANK has 20 observations and 38 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12047  data work._augment;
12048  do BIN= 1 to 20;
12049  DECILE = BIN*5;
12050  output;
12051  end;
12052  run;

NOTE: The data set WORK._AUGMENT has 20 observations and 2 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12053  data WORK._EMRANK;
12054  merge WORK._AUGMENT WORK._EMRANK;
12055  by BIN;
12056  run;

NOTE: There were 20 observations read from the data set WORK._AUGMENT.
NOTE: There were 20 observations read from the data set WORK._EMRANK.
NOTE: The data set WORK._EMRANK has 20 observations and 38 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

12057  data WORK._EMRANK;
12058  set WORK._EMRANK end=_lastObservation_;
12059  retain _previousMinP_ _previousMaxP_;
12060  retain _group_ 1;
12061  keep event;
12062  keep bin _cutoff_ _group_;
12063  if (bin > 1) then do;
12064  bin = bin - 1;
12065  _cutoff_ = (_maxP_ + _previousMinP_) / 2;
12066  if (abs(_previousMaxP_ - _previousMinP_) < 1E-6) then do;
12067  /* tied */
12068  _cutoff_ = max((_minP_ + _maxP_)/2, min(_cutoff_, _previousMinP_/*-1E-6*/
12069  ));
12070  end;
12071  else if (abs(_maxP_ - _minP_) < 1E-6) then do;
12072  /* next tied */
12073  _cutoff_ = min((_previousMinP_ + _previousMaxP_)/2, max(_cutoff_, _maxP_/*+ 1E-6*/
12074  ));
12075  end;
12076  output;
12077  *if ( abs((_maxP_ +_minP_)/2 - (_previousMaxP_ + _previousMinP_)/2) > 1E-6) then do;
12078  * _group_ + 1;
12079  *end;
12080  if (_maxP_ le _previousMinP_ - 1E-6) then do;
12081  _group_ + 1;
12082  end;
12083  else if (abs(_maxP_ - _previousMinP_) < 1E-6) then do;
12084  if (abs(_maxP_ - _minP_) > 1E-6) then do;
12085  _group_ + 1;
12086  end;
12087  end;
12088  bin + 1;
12089  /* correct the previous change */
12090  end;
12091  if (_lastObservation_) then do;
12092  _cutoff_ = .;
12093  output;
12094  end;
12095  _previousMinP_ = _minP_;
12096  _previousMaxP_ = _maxP_;
12097  run;

NOTE: There were 20 observations read from the data set WORK._EMRANK.
NOTE: The data set WORK._EMRANK has 20 observations and 4 variables.
NOTE: DATA statement used (Total process time):
      real time           0.00 seconds
      cpu time            0.00 seconds
      

12098  data WORK._EMRANK;
12099  set WORK._EMRANK;
12100  by _group_;
12101  retain _start_;
12102  if (first._group_) then do;
12103  _start_ = _n_;
12104  end;
12105  if (last._group_) then do;
12106  _end_ = _n_;
12107  output;
12108  end;
12109  run;

NOTE: There were 20 observations read from the data set WORK._EMRANK.
NOTE: The data set WORK._EMRANK has 7 observations and 6 variables.
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

NOTE: This SAS session is using a registry in WORK.  All changes will be lost at the end of 
      this session.
12110  filename emflow "D:\Study\WQD7005 Data
12110! Mining\_final\AA1\WQD7005_AA1_Analysis\Workspaces\EMWS2\MdlComp\EMFLOWSCORE.sas";
12111  *------------------------------------------------------------*;
12112  * MdlComp: Scoring TREE_TRAIN data;
12113  *------------------------------------------------------------*;
12114  data EMWS2.MdlComp_TRAIN
12115  / view=EMWS2.MdlComp_TRAIN
12116  ;
12117  set EMWS2.Tree_TRAIN
12118  ;
12119  %inc emflow;
12151  run;

NOTE: DATA STEP view saved on file EMWS2.MDLCOMP_TRAIN.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS2.TREE_TRAIN.VIEW used (Total process time):
      real time           0.03 seconds
      cpu time            0.00 seconds
      
NOTE: DATA statement used (Total process time):
      real time           0.04 seconds
      cpu time            0.00 seconds
      

12152  quit;
12153  filename emflow;
NOTE: Fileref EMFLOW has been deassigned.

12154  filename emflow "D:\Study\WQD7005 Data
12154! Mining\_final\AA1\WQD7005_AA1_Analysis\Workspaces\EMWS2\MdlComp\EMFLOWSCORE.sas";
12155  *------------------------------------------------------------*;
12156  * MdlComp: Scoring TREE_VALIDATE data;
12157  *------------------------------------------------------------*;
12158  data EMWS2.MdlComp_VALIDATE
12159  / view=EMWS2.MdlComp_VALIDATE
12160  ;
12161  set EMWS2.Tree_VALIDATE
12162  ;
12163  %inc emflow;
12195  run;

NOTE: DATA STEP view saved on file EMWS2.MDLCOMP_VALIDATE.
NOTE: A stored DATA STEP view cannot run under a different operating system.
NOTE: View EMWS2.TREE_VALIDATE.VIEW used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      
NOTE: DATA statement used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      

12196  quit;
12197  filename emflow;
NOTE: Fileref EMFLOW has been deassigned.

12198  *------------------------------------------------------------*;
12199  * MdlComp: Computing metadata for TRAIN data;
12200  *------------------------------------------------------------*;

NOTE: View EMWS2.MDLCOMP_TRAIN.VIEW used (Total process time):
      real time           0.01 seconds
      cpu time            0.00 seconds
      
NOTE: View EMWS2.MDLCOMP_TRAIN.VIEW used (Total process time):
      real time           0.03 seconds
      cpu time            0.00 seconds
      
NOTE: View EMWS2.MDLCOMP_VALIDATE.VIEW used (Total process time):
      real time           0.03 seconds
      cpu time            0.00 seconds
      
